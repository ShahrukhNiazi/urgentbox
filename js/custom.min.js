AOS.init({
  duration: 1200,
  easing: "ease-in-out",
});
 
   $(document).ready(function () {
    $('a[href="#search"]').click(function (event) {
      event.preventDefault();
      $("#search-box").removeClass("fadeout").addClass("-open");
      setTimeout(function () {
        $("#inputSearch").focus();
      }, 800);
    });

    $('a[href="#close"]').click(function (event) {
      event.preventDefault();
      $("#search-box").addClass("fadeout");

      setTimeout(function () {
        $("#search-box").removeClass("-open fadeout");
      }, 1000);
    });

  
  });

// responsive-slider


$(document).ready(function () {
  $(window).width() <= 991 && 0 != ".nav-resp-slider".length && ($(".nav-resp-slider").addClass("owl-carousel owl-theme"), $(".nav-resp-slider").owlCarousel({
    loop: false,
    margin: 10,
    nav: !1,
    dots: false,
    autoplay: !0,
    autoplayTimeout: 3e3,
    autoplayHoverPause: !0,
    mouseDrag: !0,
    autoWidth: true, // <-- Enable auto width
    responsive: {
      0: {
        items: 1
      },
      600: {
        items: 3
      },
      1000: {
        items: 6
      }
    },
  }));

  if ($(window).width() <= 991 && $(".pro-resp-slider").length !== 0) {
    $(".pro-resp-slider").addClass("owl-carousel owl-theme");
    $(".pro-resp-slider").owlCarousel({
      loop: true,
      margin: 10,
      nav: false,
      dots: true,
      autoplay: false,
      autoplayTimeout: 3000,
      autoplayHoverPause: true,
      mouseDrag: true,
      responsive: {
        0: {
          items: 1
        },
        600: {
          items: 3
        },
        1000: {
          items: 6
        }
      },
    });
  }

  $(".client-slider").owlCarousel({
    loop: true,
    autoplay: true,
    autoplayTimeout: 3000,
    autoplayHoverPause: true,
    items: 1,
    dots: false,
    margin: 10,
    autoWidth: true,
    nav: false,
    navText: [
      '<i class="fas fa-arrow-left"></i>',
      '<i class="fas fa-arrow-right"></i>'
    ],
    responsive: {
      0: {
        items: 1
      },
      600: {
        items: 3
      },
      1000: {
        items: 6
      }
    },
  });

  $(".boxes-slider").owlCarousel({
    loop: true,
    autoplay: true,
    autoplayTimeout: 3000,
    smartSpeed: 1000, // Smooth slide transition in ms
    autoplayHoverPause: true,
    items: 1,
    dots: true,
    margin: 20,
    nav: false,
    navText: [
      '<i class="fas fa-arrow-left"></i>',
      '<i class="fas fa-arrow-right"></i>'
    ],
    responsive: {
      0: {
        items: 1
      },
      480: {
        items: 2
      },
      768: {
        items: 3
      },
      991: {
        items: 2,
      },
      1199: {
        items: 1
      }
    }
  });



  $(".inspiring-info-slider").owlCarousel({
    loop: true,
    autoplay: true,
    autoplayTimeout: 3000,
    autoplayHoverPause: true,
    items: 1,
    dots: true,
    margin: 0,
    nav: false,
    smartSpeed: 1000, // Smooth slide transition in ms
    navText: [
      '<i class="fas fa-arrow-left"></i>',
      '<i class="fas fa-arrow-right"></i>'
    ],
    responsive: {
      0: {
        items: 1
      },
      600: {
        items: 1
      },
      1000: {
        items: 1
      }
    },
  });

  (function () {
    const wrapper = document.getElementById('length-qty');
    const input = wrapper.querySelector('.count');
    const plus = wrapper.querySelector('.plus');
    const minus = wrapper.querySelector('.minus');

    plus.addEventListener('click', () => {
      input.value = parseInt(input.value) + 1;
    });

    minus.addEventListener('click', () => {
      if (parseInt(input.value) > 0) input.value = parseInt(input.value) - 1;
    });
  })();

  // Width Slider Control
  (function () {
    const wrapper = document.getElementById('width-qty');
    const input = wrapper.querySelector('.count');
    const plus = wrapper.querySelector('.plus');
    const minus = wrapper.querySelector('.minus');

    plus.addEventListener('click', () => {
      input.value = parseInt(input.value) + 2; // You can customize step
    });

    minus.addEventListener('click', () => {
      if (parseInt(input.value) > 0) input.value = parseInt(input.value) - 2;
    });
  })();

  // Depth Slider Control
  (function () {
    const wrapper = document.getElementById('depth-qty');
    const input = wrapper.querySelector('.count');
    const plus = wrapper.querySelector('.plus');
    const minus = wrapper.querySelector('.minus');

    plus.addEventListener('click', () => {
      input.value = parseInt(input.value) + 5; // Different logic
    });

    minus.addEventListener('click', () => {
      if (parseInt(input.value) > 0) input.value = parseInt(input.value) - 5;
    });
  })();

});


// Fancybox Config
$('[data-fancybox="gallery"]').fancybox({
  buttons: [
    "slideShow",
    "zoom",
    "fullScreen",
    "close"
  ],
  loop: false,
  protect: true
});


document.addEventListener("DOMContentLoaded", function () {
  const menu = document.querySelector(".menu");
  const menuMain = menu?.querySelector(".menu-main");
  const goBack = menu?.querySelector(".go-back");
  const menuTrigger = document.querySelector(".mobile-menu-trigger");
  const closeMenu = menu?.querySelector(".mobile-menu-close");
  const menuOverlay = document.querySelector(".menu-overlay");

  let subMenu;

  if (menu && menuMain) {
    menuMain.addEventListener("click", (e) => {
      if (!menu.classList.contains("active")) return;

      const hasChildren = e.target.closest(".menu-item-has-children");
      if (hasChildren) {
        showSubMenu(hasChildren);
      }
    });
  }

  if (goBack) {
    goBack.addEventListener("click", () => {
      hideSubMenu();
    });
  }

  if (menuTrigger) {
    menuTrigger.addEventListener("click", () => {
      toggleMenu();
    });
  }

  if (closeMenu) {
    closeMenu.addEventListener("click", () => {
      toggleMenu();
    });
  }

  if (menuOverlay) {
    menuOverlay.addEventListener("click", () => {
      toggleMenu();
    });
  }

  function toggleMenu() {
    if (menu) menu.classList.toggle("active");
    if (menuOverlay) menuOverlay.classList.toggle("active");
  }

  function showSubMenu(hasChildren) {
    subMenu = hasChildren.querySelector(".sub-menu");
    if (subMenu) {
      subMenu.classList.add("active");
      subMenu.style.animation = "slideLeft 0.5s ease forwards";

      const menuTitle = hasChildren.querySelector("i")?.parentNode.childNodes[0].textContent.trim();
      if (menu) {
        menu.querySelector(".current-menu-title").innerHTML = menuTitle;
        menu.querySelector(".mobile-menu-head").classList.add("active");
      }
    }
  }

  function hideSubMenu() {
    if (subMenu) {
      subMenu.style.animation = "slideRight 0.5s ease forwards";
      setTimeout(() => {
        subMenu.classList.remove("active");
      }, 300);
    }

    if (menu) {
      menu.querySelector(".current-menu-title").innerHTML = "";
      menu.querySelector(".mobile-menu-head").classList.remove("active");
    }
  }

  window.onresize = function () {
    if (window.innerWidth > 991 && menu?.classList.contains("active")) {
      toggleMenu();
    }
  };
});


$(document).ready(function () {
  var x = new SlimSelect({
    select: '#demo'
  });

 });

     $(document).ready(function () {
            // Wait for all images to load first
            var images = $('#sync1 img');
            var loadedImages = 0;
            var totalImages = images.length;

            images.each(function() {
                var img = new Image();
                img.src = $(this).attr('src');
                img.onload = function() {
                    loadedImages++;
                    if (loadedImages === totalImages) {
                        initSlider();
                    }
                };
                img.onerror = function() {
                    loadedImages++;
                    if (loadedImages === totalImages) {
                        initSlider();
                    }
                };
            });

            // If no images found, initialize immediately
            if (totalImages === 0) {
                initSlider();
            }

            function initSlider() {
                var sync1 = $("#sync1");
                var sync2 = $("#sync2");
                var slidesPerPage = 4;
                var syncedSecondary = true;

                function getEdgeColor(imgElement, callback) {
                    var canvas = document.createElement("canvas");
                    var ctx = canvas.getContext("2d");
                    var img = new Image();
                    
                    img.crossOrigin = "Anonymous";
                    img.src = imgElement.src;
                    
                    img.onload = function() {
                        canvas.width = img.width;
                        canvas.height = img.height;
                        ctx.drawImage(img, 0, 0, img.width, img.height);
                        
                        var pixelData = [
                            ctx.getImageData(0, 0, 1, 1).data,
                            ctx.getImageData(img.width - 1, 0, 1, 1).data,
                            ctx.getImageData(0, img.height - 1, 1, 1).data,
                            ctx.getImageData(img.width - 1, img.height - 1, 1, 1).data
                        ];
                        
                        var r = 0, g = 0, b = 0;
                        for (var i = 0; i < pixelData.length; i++) {
                            r += pixelData[i][0];
                            g += pixelData[i][1];
                            b += pixelData[i][2];
                        }
                        r = Math.round(r / pixelData.length);
                        g = Math.round(g / pixelData.length);
                        b = Math.round(b / pixelData.length);
                        
                        callback(rgbToHex(r, g, b));
                    };
                    
                    img.onerror = function() {
                        callback("#f5f5f5");
                    };
                }

                function rgbToHex(r, g, b) {
                    return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
                }

                // Initialize with first image color
                var firstImg = $("#sync1 .item:first img")[0];
                getEdgeColor(firstImg, function(color) {
                    $("#productSection").css("background-color", color);
                });

                sync1.owlCarousel({
                    items: 1,
                    slideSpeed: 2000,
                    nav: false,
                    autoplay: false,
                    dots: false,
                    loop: true,
                    responsiveRefreshRate: 200,
                    responsive: {
                        0: { items: 1 },
                        600: { items: 1 },
                        1000: { items: 1 }
                    }
                }).on("changed.owl.carousel", syncPosition);

                sync2.on("initialized.owl.carousel", function() {
                    sync2.find(".owl-item").eq(0).addClass("current");
                }).owlCarousel({
                    items: slidesPerPage,
                    dots: false,
                    nav: false,
                    margin: 15,
                    smartSpeed: 200,
                    slideSpeed: 500,
                    slideBy: slidesPerPage,
                    responsiveRefreshRate: 100,
                    mouseDrag: false,
                    touchDrag: false,
                    autoWidth: true,
                    responsive: {
                        0: { items: 0 },
                        600: { items: 3 },
                        1000: { items: 3 }
                    }
                }).on("changed.owl.carousel", syncPosition2);

                function syncPosition(el) {
                    var count = el.item.count - 1;
                    var current = Math.round(el.item.index - (el.item.count / 2) - 0.5);
                    if (current < 0) current = count;
                    if (current > count) current = 0;

                    sync2.find(".owl-item").removeClass("current").eq(current).addClass("current");
                    var onscreen = sync2.find(".owl-item.active").length - 1;
                    var start = sync2.find(".owl-item.active").first().index();
                    var end = sync2.find(".owl-item.active").last().index();

                    if (current > end) {
                        sync2.data("owl.carousel").to(current, 100, true);
                    }
                    if (current < start) {
                        sync2.data("owl.carousel").to(current - onscreen, 100, true);
                    }

                    var currentImg = $(el.target).find(".owl-item").eq(el.item.index).find("img")[0];
                    getEdgeColor(currentImg, function(color) {
                        $("#productSection").css("background-color", color);
                    });
                }

                function syncPosition2(el) {
                    if (syncedSecondary) {
                        var number = el.item.index;
                        sync1.data("owl.carousel").to(number, 100, true);
                        
                        var currentImg = $("#sync1").find(".owl-item").eq(number).find("img")[0];
                        getEdgeColor(currentImg, function(color) {
                            $("#productSection").css("background-color", color);
                        });
                    }
                }

                sync2.on("click", ".owl-item", function(e) {
                    e.preventDefault();
                    var number = $(this).index();
                    sync1.data("owl.carousel").to(number, 300, true);
                });

                $('#sync1').on('click', '[data-fancybox]', function(e) {
                    e.stopPropagation();
                });
            }
        });

